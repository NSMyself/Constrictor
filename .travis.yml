language: swift
osx_image: xcode9.3

install: true

before_install:
 - gem install cocoapods
 - pod --version

script:
 - xcodebuild -project Constrictor.xcodeproj -scheme Constrictor CODE_SIGNING_REQUIRED=NO build test

 - cd Example/
 - pod repo update && pod update
 - set -o pipefail
 - xcodebuild -workspace Example.xcworkspace -scheme Example -sdk iphonesimulator ONLY_ACTIVE_ARCH=NO | xcpretty -c
 - cd ..
 - travis_wait 30 pod lib lint Constrictor.podspec

after_success:
  - bash <(curl -s https://codecov.io/bash)
